<!-- Auto-generated guidance for AI coding agents working in this repository -->
# Copilot instructions — RateYourBarber

Repository snapshot (discovered):
- Top-level contains: `Rate Your Barber.txt` and basic scaffold files generated by the agent.

What to know before editing
- This scaffold targets Node/TypeScript for workers and a Next.js frontend by default.
- Image analysis for MVP: use Google Vision (SafeSearch + label detection). Embeddings via OpenAI or CLIP + Pinecone.

Primary agent objective
- Implement features incrementally: scaffold → ingestion workers → normalization → LLM enrichment → frontend search.

Agent workflow
1. Run quick checks: `ls -la`, `git status --porcelain`, and look for manifests in `api/`, `web/`, `workers/`.
2. When modifying DB schema, add migration SQL into `api/migrations/` and update `api/index.js` migration runner.
3. Place LLM prompts in `api/ai/prompts/`. Centralize prompt templates and log prompts/outputs to `api/ai/logs/` (no PII).

Project-specific conventions
- `web/` contains React/Next pages and components (`web/pages`, `web/components`).
- `api/` contains lightweight HTTP handlers and `api/contracts/` for API schema docs.
- `workers/` contains crawling and processing jobs; keep workers idempotent and append-only for `raw_snapshots`.
- `api/migrations/` contains SQL migration files prefixed with incremental numbers.

Data handling notes
- Prefer Yelp API photo URLs with attribution — avoid hosting photos unless review of Yelp terms allows caching. Document caching policy in `storage/README.md`.
- Never infer ethnicity/nationality from images. Allow barbers to self-declare identity on claimed profiles only.

Developer UX
- Use `docker compose up --build` (root) to start a local dev stack: Postgres + Redis + api + web + worker stubs.
- Environment variables in `.env.example` must be copied to `.env` for local runs.

When you make changes
- Keep commits focused and add a short `README` entry if you change conventions.
- Add tests for parsing and scoring logic (store test fixtures in `tests/fixtures/`).

If you need direction
- Ask which stack (Node vs Python) to prioritize before invasive changes. Default is Node/TypeScript.
<!-- Auto-generated guidance for AI coding agents working in this repository -->
# Copilot instructions — RateYourBarber

Repository snapshot (discovered):
- Top-level contains: `Rate Your Barber.txt` (no source code files found)

What I learned (facts only):
- There is currently no `package.json`, `pyproject.toml`, `Podfile`, `README.md`, or other common project manifest in the repository root.
- No existing agent guidance files (e.g., `AGENT.md`, `copilot-instructions.md`, `CLAUDE.md`) were found during inspection.

Primary agent objective
- Help the developer quickly assess, optionally scaffold, and then implement features with explicit confirmation before making large changes.

Agent workflow (step-by-step, actionable)
1. Quick repo probe (run these to discover tech stack):
   - `ls -la` (list files)
   - `git status --porcelain=v1` (see unstaged/staged files)
   - `rg --hidden --glob '!.git' "" --files -g '!node_modules' | sed -n '1,200p'` (use ripgrep if available to list files)
   - Check for common manifests: `test -f package.json && echo "node"`, `test -f pyproject.toml && echo "python"`, `test -f Podfile && echo "ios/cocoapods"`

2. If a language manifest exists, run the matching install/build commands (only after confirming with the user):
   - Node: `npm ci` or `yarn install`, then `npm test` or `npm run build`
   - Python (poetry): `poetry install` then `poetry run pytest`
   - iOS (Podfile): `pod install` in `ios/` or workspace root
   - Android/Gradle: `./gradlew assembleDebug` in relevant subfolder

3. When there are no manifests (current repository state):
   - Ask the user whether to scaffold a minimal project (ask which platform/language).
   - If the user approves scaffolding, create a small, explicit scaffold (single commit) and include a short `README.md` describing the scaffolding choices.
   - Before any scaffold or major change, present a one-paragraph plan and wait for approval.

Project-specific conventions and checks
- Because no code was found, there are no discoverable, project-specific coding conventions to follow. When code appears, look first for these files to infer conventions:
  - `README.md` — project purpose and setup
  - `CONTRIBUTING.md` — style and commit rules
  - `package.json` / `pyproject.toml` / `Gemfile` — dependency and script conventions
  - `/.github` workflows — CI commands and tests

Integration points & external dependencies (how to discover)
- Look for environment files (`.env`, `.env.example`) and CI workflow (`.github/workflows/**`) to find external services and secrets management.
- Search for `API_KEY`, `DATABASE_URL`, `SENTRY_DSN`, or direct provider SDK imports to identify third-party integrations.

Editing and PR behavior
- Keep changes minimal and focused. Each non-trivial change should be a separate commit with a short message.
- If creating or modifying code structure, produce a brief migration note in `README.md` or a `CHANGES.md` entry.

What to ask the user (if missing info)
- Which language/platform should I prioritize (Node, Python, iOS, Android, other)?
- Do you want me to scaffold a minimal project (tests, CI config, README)?
- Any repository-specific style rules I should enforce (lint, formatter, test framework)?

Notes for human reviewers
- This file was generated after a shallow inspection that found no code. If there are private submodules or alternate branches with code, point me to them and I will re-run the analysis.

If this is useful, tell me which platform/language to target and whether you approve scaffolding; I can then create a minimal project layout and CI configuration.
