{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PRO-BLADE/Github/RateYourBarber/web/lib/adapters.ts"],"sourcesContent":["// web/lib/adapters.ts\n// Central adapters to convert API shapes to UI shapes\n\nexport type UiBarber = {\n  id: string | number;\n  name: string;\n  shop: string;\n  distance: string;\n  trust: number;\n  specialties: any[];\n  price: string;\n  thumb: string;\n};\n\nexport function mapApiBarberToUi(b: any): UiBarber {\n  // DB-backed barber\n  if (b && (b.trust_score || b.thumbnail_url || b.distance_m !== undefined)) {\n    const trustVal = b.trust_score ? (typeof b.trust_score.value === 'number' ? b.trust_score.value : Number(b.trust_score.value)) : 0;\n    return {\n      id: b.id,\n      name: b.name || '',\n      shop: (b.primary_location && b.primary_location.formatted_address) || b.shop || '',\n      distance: b.distance_m ? `${(b.distance_m/1609).toFixed(1)} mi` : (b.distance || ''),\n      trust: Number.isFinite(trustVal) ? trustVal : 0,\n      specialties: b.top_tags || b.specialties || [],\n      price: b.price || '$$?',\n      thumb: b.thumbnail_url || b.image_url || b.thumb || '',\n    };\n  }\n\n  // Yelp-like result\n  return {\n    id: b.id,\n    name: b.name || '',\n    shop: b.address || '',\n    distance: b.distance_m ? `${(b.distance_m/1609).toFixed(1)} mi` : (b.distance || ''),\n    trust: Math.min(100, Math.round((b.rating || 0) / 5 * 100)),\n    specialties: b.categories || [],\n    price: b.price || '$$?',\n    thumb: b.image_url || '',\n  };\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;AACtB,sDAAsD;;;;;AAa/C,SAAS,iBAAiB,CAAM;IACrC,mBAAmB;IACnB,IAAI,KAAK,CAAC,EAAE,WAAW,IAAI,EAAE,aAAa,IAAI,EAAE,UAAU,KAAK,SAAS,GAAG;QACzE,MAAM,WAAW,EAAE,WAAW,GAAI,OAAO,EAAE,WAAW,CAAC,KAAK,KAAK,WAAW,EAAE,WAAW,CAAC,KAAK,GAAG,OAAO,EAAE,WAAW,CAAC,KAAK,IAAK;QACjI,OAAO;YACL,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI,IAAI;YAChB,MAAM,AAAC,EAAE,gBAAgB,IAAI,EAAE,gBAAgB,CAAC,iBAAiB,IAAK,EAAE,IAAI,IAAI;YAChF,UAAU,EAAE,UAAU,GAAG,GAAG,CAAC,EAAE,UAAU,GAAC,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC,GAAI,EAAE,QAAQ,IAAI;YACjF,OAAO,OAAO,QAAQ,CAAC,YAAY,WAAW;YAC9C,aAAa,EAAE,QAAQ,IAAI,EAAE,WAAW,IAAI,EAAE;YAC9C,OAAO,EAAE,KAAK,IAAI;YAClB,OAAO,EAAE,aAAa,IAAI,EAAE,SAAS,IAAI,EAAE,KAAK,IAAI;QACtD;IACF;IAEA,mBAAmB;IACnB,OAAO;QACL,IAAI,EAAE,EAAE;QACR,MAAM,EAAE,IAAI,IAAI;QAChB,MAAM,EAAE,OAAO,IAAI;QACnB,UAAU,EAAE,UAAU,GAAG,GAAG,CAAC,EAAE,UAAU,GAAC,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC,GAAI,EAAE,QAAQ,IAAI;QACjF,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,EAAE,MAAM,IAAI,CAAC,IAAI,IAAI;QACtD,aAAa,EAAE,UAAU,IAAI,EAAE;QAC/B,OAAO,EAAE,KAAK,IAAI;QAClB,OAAO,EAAE,SAAS,IAAI;IACxB;AACF"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PRO-BLADE/Github/RateYourBarber/web/pages/shop/%5Bid%5D.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { mapApiBarberToUi, UiBarber } from '../../lib/adapters';\n\nexport default function ShopPage(): JSX.Element {\n  const router = useRouter();\n  const { id } = router.query;\n  const [barber, setBarber] = useState<UiBarber | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!id) return;\n\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        const apiBase = process.env.NEXT_PUBLIC_API_URL || '';\n        const res = await fetch(`${apiBase}/api/search?term=barber&location=`);\n        if (!res.ok) throw new Error(`search failed: ${res.status}`);\n        const items = await res.json();\n        const found = items.find((b: any) => String(b.id) === String(id));\n        if (!found) {\n          setError('Barber not found');\n          setBarber(null);\n        } else {\n          setBarber(mapApiBarberToUi(found));\n        }\n      } catch (err: any) {\n        setError(err.message || String(err));\n        setBarber(null);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    load();\n  }, [id]);\n\n  if (loading) return <div>Loading shop...</div>;\n  if (error) return <div>Error: {error}</div>;\n  if (!barber) return <div>No barber data available</div>;\n\n  return (\n    <main style={{ padding: 20 }}>\n      <h1>{barber.name}</h1>\n      <p><strong>Shop:</strong> {barber.shop}</p>\n      <p><strong>Distance:</strong> {barber.distance}</p>\n      <p><strong>Trust:</strong> {barber.trust}</p>\n      <p><strong>Specialties:</strong> {barber.specialties?.join ? barber.specialties.join(', ') : JSON.stringify(barber.specialties)}</p>\n      {barber.thumb ? <img src={barber.thumb} alt={`${barber.name} thumbnail`} style={{ maxWidth: 300 }} /> : null}\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,2IAAS;IACxB,MAAM,EAAE,EAAE,EAAE,GAAG,OAAO,KAAK;IAC3B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAkB;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAgB;IAElD,IAAA,gHAAS,EAAC;QACR,IAAI,CAAC,IAAI;QAET,eAAe;YACb,WAAW;YACX,SAAS;YACT,IAAI;gBACF,MAAM,UAAU,6DAAmC;gBACnD,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,iCAAiC,CAAC;gBACrE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,IAAI,MAAM,EAAE;gBAC3D,MAAM,QAAQ,MAAM,IAAI,IAAI;gBAC5B,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAC,IAAW,OAAO,EAAE,EAAE,MAAM,OAAO;gBAC7D,IAAI,CAAC,OAAO;oBACV,SAAS;oBACT,UAAU;gBACZ,OAAO;oBACL,UAAU,IAAA,mIAAgB,EAAC;gBAC7B;YACF,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI,OAAO;gBAC/B,UAAU;YACZ,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAG;IAEP,IAAI,SAAS,qBAAO,qKAAC;kBAAI;;;;;;IACzB,IAAI,OAAO,qBAAO,qKAAC;;YAAI;YAAQ;;;;;;;IAC/B,IAAI,CAAC,QAAQ,qBAAO,qKAAC;kBAAI;;;;;;IAEzB,qBACE,qKAAC;QAAK,OAAO;YAAE,SAAS;QAAG;;0BACzB,qKAAC;0BAAI,OAAO,IAAI;;;;;;0BAChB,qKAAC;;kCAAE,qKAAC;kCAAO;;;;;;oBAAc;oBAAE,OAAO,IAAI;;;;;;;0BACtC,qKAAC;;kCAAE,qKAAC;kCAAO;;;;;;oBAAkB;oBAAE,OAAO,QAAQ;;;;;;;0BAC9C,qKAAC;;kCAAE,qKAAC;kCAAO;;;;;;oBAAe;oBAAE,OAAO,KAAK;;;;;;;0BACxC,qKAAC;;kCAAE,qKAAC;kCAAO;;;;;;oBAAqB;oBAAE,OAAO,WAAW,EAAE,OAAO,OAAO,WAAW,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,WAAW;;;;;;;YAC7H,OAAO,KAAK,iBAAG,qKAAC;gBAAI,KAAK,OAAO,KAAK;gBAAE,KAAK,GAAG,OAAO,IAAI,CAAC,UAAU,CAAC;gBAAE,OAAO;oBAAE,UAAU;gBAAI;;;;;uBAAQ;;;;;;;AAG9G"}}]
}